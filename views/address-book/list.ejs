<%- include('../parts/html-head') %> <%- include('../parts/navbar') %>
<div class="container">
  <div class="row">
    <div class="col">
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <% for(let i=1; i<=totalPages; i++){ let active='', href='';
          if(i===page){ active = 'active'; } else { href =
          `href=/students/${i}`; } %>
          <li class="page-item <%= active %>">
            <a class="page-link" <%="href" %> ><%= i %></a>
          </li>
          <% } %>
        </ul>
      </nav>
    </div>
  </div>

  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th scope="col"><i class="fas fa-edit"></i></th>
        <th scope="col">#</th>
        <th scope="col">姓名</th>
        <th scope="col">電郵</th>
        <th scope="col">生日</th>
        <th scope="col">手機</th>
        <th scope="col">住址</th>
        <th scope="col"><i class="fas fa-trash-alt"></i></th>
      </tr>
    </thead>
    <tbody>
      <% for(let s in rows){ %>
      <tr>
        <td>
          <a href="/students/edit/<%= rows[s].cID %>"
            ><i class="fas fa-edit"></i
          ></a>
        </td>
        <td><%= rows[s].cID %></td>
        <td><%= rows[s].cName %></td>
        <td><%= rows[s].cEmail %></td>
        <td><%= rows[s].cBirthday %></td>
        <td><%= rows[s].cPhone %></td>
        <td><%= rows[s].cAddr %></td>
        <td>
          <a href="javascript:delete_it(<%= rows[s].cID %>)"
            ><i class="fas fa-trash-alt"></i
          ></a>
        </td>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>
<script>
  function delete_it(cID) {
    if (confirm(`是否要刪除編號為 ${cID} 的資料?`)) {
      location.href = "/students/delete/" + cID;
    }
  }
</script>

<%- include('../parts/html-foot') %>
